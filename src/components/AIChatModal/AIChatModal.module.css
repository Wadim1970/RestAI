/* Черный прозрачный фон за модальным окном */
.modal-overlay {
    position: fixed; /* Фиксируем поверх всего сайта */
    top: 0; left: 0;
    width: 100vw; height: 100vh; /* На всю ширину и высоту экрана */
    z-index: 999999; /* Максимальный слой */
    overflow: hidden; /* Запрещаем скролл сайта под модалкой */
}

/* Основной контейнер модалки с эффектом стекла */
.modal-glassContainer {
    width: 100%;
    height: 100dvh; /* Высота под мобилки с учетом строк поиска в браузере */
    background-color: rgba(255, 255, 255, 0.2); /* Прозрачность фона */
    -webkit-backdrop-filter: blur(20px) saturate(150%) contrast(100%); /* Размытие (Safari) */
    backdrop-filter: blur(20px) saturate(150%) contrast(100%); /* Размытие (Chrome/FF) */
    display: flex;
    flex-direction: column; /* Элементы (чат, кнопки) идут сверху вниз */
    justify-content: flex-end; /* Прижимаем всё управление к низу экрана */
    position: relative; /* Чтобы крестик и видео позиционировались внутри */
    transform: translateZ(0);
    will-change: height;
    /* Плавный переход для изменения высоты */
    transition: height 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* ПЕРВАЯ КНОПКА: Крестик закрытия */
.modal-closeBtn {
    position: absolute; /* Ставим в конкретную точку */
    top: 5.45vw; /* Адаптивный отступ сверху */
    right: 5.45vw; /* Адаптивный отступ справа */
    width: 24px; height: 24px; /* Размер кнопки */
    background: none; border: none; padding: 0;
    z-index: 200; /* ВЫШЕ ЧЕМ ВИДЕО (слой 200 против 10) */
    display: flex; align-items: center; justify-content: center;
}

.modal-closeBtn img {
    width: 100%; height: 100%; object-fit: contain;
}

/* Область текстовых сообщений */
.modal-chatHistory {
    flex: 1; /* Занимает всё свободное место в центре */
    padding: 70px 20px 20px 20px; /* Твой отступ сверху для крестика */
    overflow-y: auto; /* Включаем скролл */
    
    /* ВАЖНО ДЛЯ МОБИЛОК: */
    display: flex; 
    flex-direction: column; 
    gap: 12px;
    
    /* НОВОЕ: Плавный скролл для iOS, чтобы автоскролл не дергался */
    -webkit-overflow-scrolling: touch; 
    
    /* НОВОЕ: Это заставит сообщения прижиматься к низу, когда их мало, 
       и правильно выталкиваться вверх клавиатурой */
    /*justify-content: flex-end; - мешало скролу когда высота окна чата была выше экрана*/ 
    
    overscroll-behavior-y: none;
    /*scroll-behavior: smooth;
    /* Важно для Android: предотвращает дерганье контента */
    height: 100%;

    z-index: 20; /* Твой слой над видео */
}

.modal-chatHistory::before {
    content: '';
    margin-top: auto;
}
}

/* ВИДЕО НА ВЕСЬ ЭКРАН (БЕЗ СКРУГЛЕНИЙ И ОБРУБКОВ) */
.videoWrapper {
    position: absolute; /* Вырываем из потока и кладем фоном */
    top: 0; left: 0; 
    width: 100%; height: 100%; /* Растягиваем на ВСЁ окно модалки */
    background: #000; /* Черный фон пока видео грузится */
    z-index: 10; /* Самый нижний слой (под всеми кнопками) */
    border-radius: 0; /* НИКАКИХ СКРУГЛЕНИЙ (удалил твои 20px) */
    overflow: hidden;
}

.videoPlaceholder {
    width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
}

.statusText {
    color: #48BF48; font-size: 14px; opacity: 0.8;
}

/* Панель управления внизу (белое поле + зеленая кнопка) */
.modal-footerControls {
    display: flex;
    align-items: flex-end; /* Текст и кнопка растут вверх */
    padding: 0 12px;
    margin-bottom: 58px; /* Твой обязательный отступ от низа */
    position: relative;
    z-index: 200; /* ВТОРАЯ КНОПКА ПОВЕРХ ВИДЕО (слой 200) */
}

/* Белая оболочка поля ввода */
.modal-inputWrapper {
    position: relative;
    flex: 1; /* Растягивается на всю ширину */
    min-height: 58px; 
    background: #FFFFFF;
    border-radius: 28px 31px 31px 15px; /* Твои уникальные радиусы инпута */
    display: flex; align-items: flex-end;
    will-change: transform, opacity; /* Подсказка браузеру для плавной отрисовки */
    backface-visibility: hidden;     /* Убирает мерцание в Webkit */
    transform: translateZ(0);        /* Принудительно включает 3D-ускорение */
}

/* Само текстовое поле */
.modal-textArea {
    width: 100%; height: auto;
    background: transparent; border: none; outline: none;
    resize: none; /* Запрет растягивать руками */
    padding: 18px 15px;
    font-size: 16px;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
    max-height: 150px; /* Поле растет до 150px, потом скролл */
    overflow-y: auto;
    line-height: 1.4;
}

/* ВТОРАЯ КНОПКА: Зеленая круглая кнопка действия */
.modal-actionButton {
    margin-left: 6px;
    width: 58px; height: 58px;
    background-color: #48BF48; /* Твой фирменный зеленый */
    border-radius: 50%; /* Круглая */
    border: none;
    display: flex; justify-content: center; align-items: center;
    flex-shrink: 0; /* Не сжимается */
    box-shadow: inset 0 0 0 1px #E5E0D4; /* Внутренняя обводка */
    will-change: transform;
    transform: translateZ(0);
}

/* Иконки внутри кнопки */
.modal-iconSend { width: 24px; height: 28px; filter: brightness(0) invert(1); }
.modal-iconAudio { width: 40px; height: 35px; filter: brightness(0) invert(1); }

/* Сообщение бота (текстовое) */
.modal-botMessage {
    background: white;
    padding: 12px 16px;
    border-radius: 12px 12px 12px 0;
    align-self: flex-start;
    max-width: 85%;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
